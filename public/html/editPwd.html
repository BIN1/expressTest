<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="../css/common.css" rel="stylesheet">
    <link href="../css/login.css" rel="stylesheet">
    <title>ä¿®æ”¹å¯†ç </title>
</head>
<body>
    <div class="content-center">
        <header>
                <span id="back">ğŸ”™</span>
                ä¿®æ”¹å¯†ç 
            </header>
        <form id="login">
            <label>
                <span>è´¦å·ï¼š</span><input name="mobile" type="text">
            </label>
            <label>
                <span>æ—§å¯†ç ï¼š</span><input  name="oldpassword" type="text">
            </label>
            <label>
                <span>æ–°å¯†ç ï¼š</span><input name="password" type="password">
            </label>
            <div id="loginBtn">ç¡®è®¤ä¿®æ”¹</div>
        </form>
    </div>
</body>
<script src="../js/jquery-3.2.1.js"></script>
<script src="../js/layer.js"></script>
<script>
    $(function(){
        $('#loginBtn').on('click',function(){
            var formDatas=$('form').serializeArray();
            var params={};
            var id=JSON.parse(localStorage.getItem('userInfo')).id;
            params.id=id;
            $.each(formDatas,function(){
                params[this.name]=this.value;
            });
            params=JSON.stringify(params);
            params=JSON.parse(params);
            var url='/api/subject/post/editPassword';
            $.ajax({
                url:url,
                data:params,
                method:'POST'
            }).done(function(res){
                if(res.statusCode==200){
                    layer.msg('å¯†ç ä¿®æ”¹æˆåŠŸ');
                    window.location.href='http://172.16.4.31:3000/html/index.html';
                }else{
                    layer.msg(res.message);
                }
                console.log(res);
            }).fail(function(err){
                console.log(err);
            })
            console.log(params);
        })
    })
</script>
</html>